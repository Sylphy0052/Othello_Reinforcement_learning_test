# Othello Development Kit User Manual

**「6人の専門家AIチーム」** と **「高度な自動化ツール」** を統合した開発環境の使い方ガイドです。

## 📦 インストールと準備

### 1. 環境変数の設定

`.env` ファイル、またはシェルの設定ファイル (`.bashrc` / `.zshrc`) に以下を設定してください。

```bash
export GITHUB_PERSONAL_ACCESS_TOKEN="your_token_here"
export BRAVE_API_KEY="your_key_here" # Web検索用 (任意)
```

### 2. プラグインの有効化

```bash
claude plugin install ./othello-full-kit
```

---

## 👥 チームメンバー (Agents)

このプラグインでは、6人の専門家エージェントが待機しています。コマンド経由、またはチャットで直接呼び出すことができます。

| 名前 | 役割 | 得意分野 | 呼び出し |
| :--- | :--- | :--- | :--- |
| **Planner (PdM)** | 企画・設計 | 要件定義、仕様策定、全体計画 | `/plan` |
| **Ace Engineer** | 実装 | Python実装、NumPy高速化、バグ修正 | `/code` |
| **Tech Lead** | 品質・安全 | コードレビュー、セキュリティ、リファクタリング | `/review` |
| **QA Engineer** | テスト | エッジケース指摘、テストコード作成 | `/test` |
| **Ops & Writer** | 運用・文書 | 環境構築、ドキュメント整備、リリース作業 | `/ops` |
| **RL Mentor** | 理論指導 | 強化学習の理論解説、悩み相談 | `/ask` |

---

## 🎮 開発ワークフロー

状況に合わせて、以下のフローでコマンドを使い分けてください。

### シナリオ1：新機能開発 (Standard Flow)

「新しい評価関数を追加したい」「GUIを作りたい」など、まとまった機能を作る場合。

1. **企画・計画 (`/plan`)**
    * User: 「対戦相手のレベルを選べる機能が欲しい」
    * PdM: 要件を整理し、TODOリストを作成します。
2. **構造設計 (`/architect`)**
    * PdM: 必要なファイル構成やクラス図を設計します。
3. **実装 (`/code`)**
    * Engineer: 設計に基づきコーディングします。（終了後、自動でフォーマットがかかります）
4. **テスト作成 (`/test`)**
    * QA: 新機能に対する単体テストを作成します。
5. **レビュー (`/review`)**
    * Lead: 実装内容をチェックし、問題があれば修正指示を出します。
6. **納品 (`/ship`)**
    * Ops: テストを全実行し、パスすればGitHubにPRを作成します。

### シナリオ2：爆速機能追加 (Integrated Flow)

上記の手順をいちいち叩くのが面倒な場合。

* **統合コマンド (`/feature`)**
  * 「レベル選択機能を作って」と伝えるだけで、設計〜実装〜テストのステップをAIが順次案内してくれます。

### シナリオ3：バグ修正・エラー対応 (Hotfix)

エラーが出た、動かない時。

1. **原因究明と修正 (`/fix`)**
    * エラーログを貼り付けます。
    * Engineer: スタックトレースを読み、**Skills (Visualizer)** 等を使って原因を特定し、修正します。
2. **動作確認 (`/test`)**
    * 修正が正しいかテストで確認します。

### シナリオ4：高速化・チューニング (Optimization)

オセロAIが遅い時。

1. **現状分析 (`/optimize`)**
    * User: 「思考時間が長いので速くして」
    * Lead/Engineer: **Skills (Code Inspector)** で複雑な箇所を特定し、NumPy化などの高速化を行います。
2. **強さ測定**
    * AIは自動的に **Skills (Benchmark)** を使い、高速化によって弱くなっていないかを確認します。

---

## 🛠️ コマンド一覧 (Cheatsheet)

### Phase 1: 理解・設計

* `/explain` - コードの図解・解説 (Mentor)
* `/plan` - 要件定義・タスク出し (PdM)
* `/architect` - ファイル構成・クラス設計 (PdM)

### Phase 2: 実装・修正

* `/code` - コーディング実行 (Engineer)
* `/fix` - バグ修正 (Engineer)
* `/refactor` - 挙動を変えず綺麗にする (Lead)

### Phase 3: 品質・性能

* `/optimize` - 高速化・計算量削減 (Engineer)
* `/test` - テストコード作成 (QA)
* `/review` - コードレビュー (Lead)

### Phase 4: 運用・納品

* `/doc` - ドキュメント更新 (Ops)
* `/ship` - テスト実行 & PR作成 (Ops)

---

## 🤖 裏側で動いている機能 (Automation)

以下の機能は、ユーザーが指示しなくても**勝手に**動きます。

### 1. Skills (自律ツール)

AIが必要だと判断すると、以下の道具を自動で使用します。

* **Benchmark:** 勝率を測定する。
* **Visualizer:** ログの盤面データ(`[0,0,1...]`)を絵にする。
* **Log Analyst:** 学習ログを見て「収束していない」等を判断する。
* **Code Inspector:** 「この関数、複雑すぎて危険です」と警告する。
* **Data Peeker:** 巨大ファイルの中身を安全にチラ見する。

### 2. Hooks (自動化フック)

コマンドの前後で自動処理が走ります。

* **The Cleaner:** `/code`, `/fix` の直後に、コードを自動整形(`black`, `isort`)します。
* **The Architect:** `/plan` の直前に、最新のファイル構成図をドキュメント化します。
* **The Gatekeeper:** `/ship` の直前に、**テストを強制実行**します。失敗すると納品できません。

### 3. MCP (記憶と検索)

* **Memory:** あなたの好み（解説の詳しさ、重視するポイント）を記憶します。
* **Brave Search:** 最新のライブラリ情報や論文をネット検索します。

---

## ⚠️ トラブルシューティング

**Q. `/ship` が失敗してPRが作れない**
> Gatekeeperが作動しています。テスト(`pytest`)が失敗しているか、構文エラーがあります。`/fix` で修正してから再度実行してください。

**Q. AIが「ファイルの中身がわからない」と言う**
> ファイルパスが間違っているか、AIがコンテキストを見失っています。`/explain src/file.py` などで明示的に読ませるか、**Data Peeker** を使うよう促してください。

**Q. 検索が動かない**
> `BRAVE_API_KEY` が正しく設定されているか確認してください。設定していない場合は、`plugin.json` から `brave-search` の記述を削除してください。
